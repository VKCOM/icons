# @vkontakte/icons-scripts

Этот пакет содержит скрипты, используемые для сборки SVG-иконок в React-компоненты.

## Создание своей библиотеки иконок

Для этого необходимо организовать иконки по папкам: в каждой папке-категории должны быть только иконки. Например, здесь показаны категории иконок по размеру, а также дополнительная папка `Unsorted` с иконками, не подошедшими к другим категориями.

Обязательно должна быть папка `svg`, в которой размещены категории.

```
src/
  svg/
    12/
      add_12.svg
      smile_12.svg
    28/
      add_28.svg
      smile_28.svg
    Unsorted/
      icon_with_different_sizes.svg
```

Добавляем нужные зависимости:

```json
{
  "name": "@scope/react-icons-library",
  "version": "0.0.0",
  "files": ["dist", "src/svg"],
  "main": "dist/index.js",
  "module": "dist/es6/index.js",
  "typings": "dist/typings/index.d.ts",
  "sideEffects": ["*.css"],
  "scripts": {
    "build-icons": "node scripts/build-icons.js"
  },
  "dependencies": {
    "@vkontakte/icons-sprite": "^1.0.1"
  },
  "peerDependencies": {
    "react": "^18.0.0"
  },
  "devDependencies": {
    "@types/react": "^18.0.0",
    "@vkontakte/icons-scripts": "latest",
    "react": "^18.0.0"
  }
}
```

**`scripts/build-icons.js`**:

```js
const { generateIcons } = require('@vkontakte/icons-scripts');

generateIcons({
  srcDirectory: './src',
  distDirectory: './dist',
  extraCategories: ['Unsorted', 'Foo'],
  deprecatedIcons: {
    deprecated_icon_24: null,
    deprecated_icon_28: 'replacement_icon_28',
  },
});
```

## Опции скрипта

**`srcDirectory`** _`{string}`_<br>
Директория с иконками. В ней должна быть папка `svg` с категориями.

**`distDirectory`** _`{string}`_<br>
Папка для сгенерированных компонентов.

**`extraCategories`** _`{string[]}`_<br>
Дополнительные категории. По умолчанию скрипт будет искать иконки в `svg/[0-9][0-9]` и `svg/Unsorted`.

Может быть паттерном для `glob`.

**`deprecatedIcons`** _`{Record<string, string | null>>}`_<br>
Список устаревших иконок.

Объект, в котором свойство — это имя файла устаревшей иконки, а значение этого свойства — имя файла иконки на замену устаревшей (или `null`, если такой нет).

## Создание сабкомпонентов для иконок

Может возникнуть потребность в покраске разных частей иконок разными цветами,
для решения этой задачи из коробки доступна возможность создания неограниченного количества
подкомпонентов для базовой иконки, но нужно чтобы каждая часть иконки имела `part` суффикс в названии своего файла.

Например, необходима иконка видеокамеры синего цвета с перечеркнутой красной линией,
при этом цвета могут меняться динамически и не зашиваются в сам svg файл:

1. Нарезаем иконку на нужные части:

   <img width="221" height="341" src="https://github.com/VKCOM/icons/assets/42776347/88e15d2b-75db-4f18-9b1d-fd8abb147ada" />

2. Придумываем название для базовой иконки, в нашем случае `videocam`,
   так как эта иконка собирается по частям, нужно добавить `part` суффикс в ее название: `videocam_part`,
   и добавляем сам размер иконки: `videocam_part_28.svg`.

3. Придумываем название для части от базовой иконки, базовая иконка называется `videocam`,
   часть с линией иконки мы назвали `slash`: `videocam_slash`.
   так как эта иконка собирается по частям, нужно добавить `part` суффикс в ее название: `videocam_slash_part`,
   и добавляем сам размер иконки в название файла в конце: `videocam_slash_part_28.svg`.

4. Кладём получившиеся файлы в папку с нужной категорией, как описано в шаге про создание своей библиотеки.

После этого иконку можно собирать по частям в коде:

```tsx
<Icon28VideocamPart>
  <Icon28VideocamPart.SlashPart />
</Icon28VideocamPart>
```

Сам компонент иконки и все его сабкомпоненты имеют одинаковый набор принимаемых параметров, поэтому каждую отдельную часть можно покрасить например через `fill`.
